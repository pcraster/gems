{% extends "base.html" %}

{% block content %}
<h2>System status overview</h2>

{{completed}}

<ul class="list-group">
{% for item in messages %}
	<li class="list-group-item">
		{% if item.passed %}
			<span style="color:darkgreen"><i class="fa fa-check-circle"></i></span> {{item.message|safe}}
		{% else %}
			<span style="color:red">
				<i class="fa fa-times-circle"></i> 
				{{item.message|safe}}.
				{% if item.hint %}Hint: {{item.hint|safe}}.{% endif %}
			</span> 
		{% endif %}
	</li>
{% endfor %}
</ul>

<div class="panel panel-default" style="padding-bottom:0">
	<div class="panel-heading">
		<strong>Beanstalk server statistics</strong>
	</div>
	<div class="panel-body">
		<div class="row">
			{% for column in server_stats | sort | slice(4) -%}
			<div class="col-xs-3 col-md-3">
				{%- for stat in column -%}
				{{stat}} <code>{{server_stats[stat]}}</code><br/>
				{%- endfor -%}
			</div>
			{%- endfor %}
		</div>
	</div>
</div>


{% for tube in tube_stats %}
<div class="panel panel-default" style="padding-bottom:0">
	<div class="panel-heading">
		<strong>Beanstalk {{tube.stats.name}} tube statistics</strong>
	</div>
	<div class="panel-body">
		<div class="row">
			{% for column in tube.stats | sort | slice(4) -%}
			<div class="col-xs-3 col-md-3">
				{%- for stat in column -%}
				{{stat}} <code>{{tube.stats[stat]}}</code><br/>
				{%- endfor -%}
			</div>
			{%- endfor %}
		</div>
	</div>
	<div class="panel-body" style="border-top:1px solid #ddd;">
		{% if tube.peek %}
			<p>quick peek at the next ready job:</p>
			<pre style="background-color:#fff;border:none;">{{tube.peek}}</pre>
		{% else %}
			<p>no ready jobs to peek at...</p>
		{% endif %}
	</div>
</div>
{% endfor %}

<!--
<pre>
{{completed}}
</pre>
-->
{% endblock %}
